<!DOCTYPE html>
<html lang='en'>
<head>
  
<link rel="stylesheet" href="style.css">
<meta charset='utf-8' />

<script src="api.js"></script> 
  
<link href='fullcalendar/lib/main.css' rel='stylesheet'/> <!-- Calendar code-->
<script src='fullcalendar/lib/main.js'></script>
<script>
  document.addEventListener('DOMContentLoaded', async function() {
    var calendarEl = document.getElementById('calendar');
    loadedCalendar = await api().users.getEvents(1)
    parsedEvents = []
    console.log(loadedCalendar)
    loadedCalendar.forEach((calendarEvent) => {
      if (calendarEvent.time.confirmed == true) {
        parsedEvents.push({
          title: calendarEvent.info.name,
          start: calendarEvent.time.start,
          end: calendarEvent.time.finish,
          allDay: false,
        })
      }
    })
    console.log(parsedEvents)
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: parsedEvents
    });
    calendar.render();
  });
</script>

</head>

<div class="header">
  <h1> Smart Scheduler </h1>
</div>

<body>
  
<div class="header-right">
  <a href="index.html">Home</a>
  <a href="friends.html">Friends</a>
  <a href="events.html">Events</a>
</div>

<div id='calendar' class=calendar></div>

<sidebar style="width: 30%; display: inline-block; position: absolute; margin-top: 150px;" class="sidebar">
  <p>Friends:</p>
  
</sidebar>
  
</body>

</html>